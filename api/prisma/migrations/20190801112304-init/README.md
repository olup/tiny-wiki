# Migration `20190801112304-init`

This migration has been generated by loup topalian at 8/1/2019, 11:23:04 AM.
You can check out the [state of the datamodel](./datamodel.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "dev"."User"("id" TEXT NOT NULL  ,"email" TEXT NOT NULL DEFAULT '' ,"name" TEXT   ,PRIMARY KEY ("id"));

CREATE TABLE "dev"."Role"("id" TEXT NOT NULL  ,"slug" TEXT NOT NULL DEFAULT '' ,"locked" BOOLEAN NOT NULL DEFAULT false ,PRIMARY KEY ("id"));

CREATE TABLE "dev"."Page"("id" TEXT NOT NULL  ,"title" TEXT NOT NULL DEFAULT '' ,"slug" TEXT NOT NULL DEFAULT '' ,"content" TEXT   ,"published" BOOLEAN NOT NULL DEFAULT false ,"draftOwner" TEXT   REFERENCES User(id),PRIMARY KEY ("id"));

CREATE TABLE "dev"."_RoleToUser"("A" TEXT NOT NULL  REFERENCES Role(id),"B" TEXT NOT NULL  REFERENCES User(id));

CREATE UNIQUE INDEX "dev"."User.id._UNIQUE" ON "User"("id")

CREATE UNIQUE INDEX "dev"."User.email._UNIQUE" ON "User"("email")

CREATE UNIQUE INDEX "dev"."Role.id._UNIQUE" ON "Role"("id")

CREATE UNIQUE INDEX "dev"."Role.slug._UNIQUE" ON "Role"("slug")

CREATE UNIQUE INDEX "dev"."Page.id._UNIQUE" ON "Page"("id")

CREATE UNIQUE INDEX "dev"."Page.slug._UNIQUE" ON "Page"("slug")
```

## Changes

```diff
diff --git datamodel.mdl datamodel.mdl
migration ..20190801112304-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,37 @@
+datasource db {
+  provider = "sqlite"
+  url      = "file:../db/dev.db"
+  default  = true
+}
+
+generator photon {
+  provider = "photonjs"
+}
+
+generator nexus_prisma {
+  provider = "nexus-prisma"
+}
+
+model User {
+  id    String  @default(cuid()) @id @unique
+  email String  @unique
+  name  String?
+  roles Role[]
+}
+
+model Role {
+  id     String  @default(cuid()) @id @unique
+  users  User[]
+  slug   String  @unique
+  locked Boolean
+}
+
+
+model Page {
+  id         String  @default(cuid()) @id @unique
+  title      String
+  slug       String  @unique
+  content    String?
+  published  Boolean
+  draftOwner User?
+}
```

## Photon Usage

You can use a specific Photon built for this migration (20190801112304-init)
in your `before` or `after` migration script like this:

```ts
import Photon from '@generated/photon/20190801112304-init'

const photon = new Photon()

async function main() {
  const result = await photon.users()
  console.dir(result, { depth: null })
}

main()

```
